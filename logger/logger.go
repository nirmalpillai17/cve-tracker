package logging

import (
	"fmt"
	"log"
	"net/http"
)

type CustomLogger struct {
	*log.Logger
}

func NewLogger() CustomLogger {
	clg := CustomLogger{
		Logger: log.Default(),
	}
	clg.SetFlags(log.Ltime | log.Lshortfile)
	return clg
}

func (cl CustomLogger) print(v ...any) {
	cl.Output(4, fmt.Sprint(v...))
}

func (cl CustomLogger) Info(s string) {
	cl.print("[INFO] ", s)
}

func (cl CustomLogger) Warn(s string) {
	cl.print("[WARN] ", s)
}

func (cl CustomLogger) Error(err error) {
	cl.print("[ERROR] ", err.Error())
}

func (cl CustomLogger) HttpError(w http.ResponseWriter, err error, sc int) {
	cl.Error(err)
	http.Error(w, err.Error(), sc)
}
